<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">

<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" >
<title>tharsis.prof.despikersender - Tharsis.prof 0.5 API documentation</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body><div id="top">
<div id="header">
<a id="main-heading" href="index.html">Tharsis.prof 0.5 API documentation</a>
</div>
</div>

<div id="navigation">
<div class="navblock">
<div id="toctop">
<ul><li><a href="http://code.dlang.org">More D libraries</a></li>
</ul>
</div>
</div>
<div class="navblock">
<ul><li><a href="index.html">Main page</a></li>
<li><a href="tharsis.prof.chunkyeventlist.html">tharsis.prof.chunkyeventlist</a></li>
<li><a href="tharsis.prof.csv.html">tharsis.prof.csv</a></li>
<li><a href="tharsis.prof.despikersender.html">tharsis.prof.despikersender</a></li>
<li><a href="tharsis.prof.event.html">tharsis.prof.event</a></li>
<li><a href="tharsis.prof.profiler.html">tharsis.prof.profiler</a></li>
<li><a href="tharsis.prof.ranges.html">tharsis.prof.ranges</a></li>
</ul>
</div>
</div>

<div id="content">
<h1>tharsis.prof.despikersender</h1>
<!-- Generated by Ddoc from tharsis/prof/despikersender.d -->
<p>Support for <a href="https://github.com/kiith-sa/despiker">Despiker</a></p>

<dl><dt class="d_decl"><a name="DespikerSenderException"></a>class <a name="DespikerSenderException"></a><span class="ddoc_psymbol">DespikerSenderException</span>: <u>object.Exception</u>;
</dt>
<dd><p>Exception thrown at DespikerSender errors.</p>

</dd>
<dt class="d_decl"><a name="DespikerSender"></a>class <a name="DespikerSender"></a><span class="ddoc_psymbol">DespikerSender</span>;
</dt>
<dd><p>Sends profiling data recorded by one or more profilers to the Desiker profiler.
</p>
<p><a href="https://github.com/kiith-sa/despiker">Despiker</a> is a real-time graphical
 profiler based on Tharsis.prof. It visualizes zones in frames while the game is running
 and allows the user to move between frames and automatically find the worst frame. Note
 that at the moment, Despiker is extremely experimental and unstable.
<br>

 See <a href="http://defenestrate.eu/docs/despiker/index.html">Despiker
 documentation</a> for more info.

</p>
<p><b>Example:</b><br>
<pre class="d_code"><span class="d_comment">// Profiler profiler - construct it somewhere first
</span>
<span class="d_keyword">auto</span> sender = <span class="d_keyword">new</span> <span class="d_psymbol">DespikerSender</span>([profiler]);

<span class="d_keyword">for</span>(;;)
{
    <span class="d_comment">// Despiker will consider code in this zone (named "frame") a part of a single frame.
</span>    <span class="d_comment">// Which zone is considered a frame can be changed by setting the
</span>    <span class="d_comment">// sender.frameFilter property.
</span>    <span class="d_keyword">auto</span> frame = Zone(profiler, <span class="d_string">"frame"</span>);

    ... frame code here, <span class="d_keyword">with</span> more zones ...

    <span class="d_keyword">if</span>(... condition to start Despiker ...)
    {
        <span class="d_comment">// Looks in the current directory, directory with the binary/exe and in PATH
</span>        <span class="d_comment">// use sender.startDespiker("path/to/despiker") to specify explicit path
</span>        sender.startDespiker();
    }

    <span class="d_comment">// No zones must be in progress while sender is being updated, so we end the frame
</span>    <span class="d_comment">// early by destroying it.
</span>    destroy(frame);

    <span class="d_comment">// Update the sender, send profiling data to Despiker if it is running
</span>    sender.update();
}
</pre>
</p>

<dl><dt class="d_decl"><a name="DespikerSender.maxProfilers"></a>int <a name="maxProfilers"></a><span class="ddoc_psymbol">maxProfilers</span>;
</dt>
<dd><p>Maximum number of profilers we can send data from.</p>

</dd>
<dt class="d_decl"><a name="DespikerSender.this"></a>pure nothrow @nogc @safe this(Profiler[] <b>profilers</b>);
</dt>
<dd><p>Construct a DespikerSender sending data recorded by specified <b>profilers</b>.
</p>
<p>Despiker will show results from passed <b>profilers</b> side-by-side, matching their
 'frame' zones. To get meaningful results, all <b>profilers</b> should start profiling
 at the same time and have one 'frame' zone for each frame of the profiled
 game/program.
<br>

 The main use of multiple <b>profilers</b> is to profile code in multiple threads
 simultaneously. If you don't need this, pass a single profiler.

</p>
<b>Parameters:</b><div class="pbr"><table class=parms><tr><td valign=top>Profiler[] <b>profilers</b></td>
<td valign=top>Profilers the DespikerSender will send data from. Must not be empty.
             Must not have more than 1024 <b>profilers</b>.</td></tr>
</table></div>
<p><b>Note:</b><br>
At the moment, DespikerSender does not support resetting <b>profilers</b>. Neither of the
 passed <b>profilers</b> may be reset() while the DespikerSender is being used.</p>

</dd>
<dt class="d_decl"><a name="DespikerSender.sending"></a>const pure nothrow @nogc @safe bool <a name="sending"></a><span class="ddoc_psymbol">sending</span>();
</dt>
<dd><p>Is there a Despiker instance (that we are <a name="sending"></a><span class="ddoc_psymbol">sending</span> to) running at the moment?</p>

</dd>
<dt class="d_decl"><a name="DespikerSender.frameFilter"></a>pure nothrow @nogc @safe void <a name="frameFilter"></a><span class="ddoc_psymbol">frameFilter</span>(DespikerFrameFilter <b>rhs</b>);
</dt>
<dd><p>Set the filter to used by Despiker to determine which zones are frames.
</p>
<p>Affects the following calls to startDespiker(), does not affect the running
 Despiker instance, if any.</p>

</dd>
<dt class="d_decl"><a name="DespikerSender.startDespiker"></a>@safe void <a name="startDespiker"></a><span class="ddoc_psymbol">startDespiker</span>(string <b>defaultPath</b> = null);
</dt>
<dd><p>Open a Despiker window and start sending profiling data to it.
</p>
<p>Can only be called when sending is <b>false</b> (after DespikerSender construction
 or reset).
<br>

 By default, looks for the Despiker binary in the following order:
<br>

 0: <b>defaultPath</b>, if specified
 1: 'despiker' in current working directory
 2: 'despiker' in directory of the running binary
 3: 'despiker' in PATH

</p>
<p><b>Note:</b><br>
the next update() call will send all profiling data recorded so far to the
 Despiker.

</p>
<b>Throws:</b><div class="pbr">DespikerSenderException on failure (couldn't find or run Despiker in any of the
 searched paths, or couldn't run Despiker with path specified by <b>defaultPath</b>).</div>

</dd>
<dt class="d_decl"><a name="DespikerSender.reset"></a>nothrow @nogc @trusted void <a name="reset"></a><span class="ddoc_psymbol">reset</span>();
</dt>
<dd><p>Resets the sender.
</p>
<p>If Despiker is running, 'forgets' it, stops sending to it without closing it and
 the next startDespiker() call will launch a new Despiker instance.</p>

</dd>
<dt class="d_decl"><a name="DespikerSender.update"></a>nothrow @trusted void <a name="update"></a><span class="ddoc_psymbol">update</span>();
</dt>
<dd><p>Update the sender.
</p>
<p>Must not be called if any profilers passed to DespikerSender constructor are in a
 zone, or are being accessed by other threads (any synchronization must be handled
 by the caller).</p>

</dd>
</dl>
</dd>
<dt class="d_decl"><a name="DespikerFrameFilter"></a>struct <a name="DespikerFrameFilter"></a><span class="ddoc_psymbol">DespikerFrameFilter</span>;
</dt>
<dd><p>Used to tell Despiker which zones are 'frames'.
</p>
<p>Despiker displays one frame at a time, and it lines up frames from multiple profilers
 enable profiling multiple threads. Properties of this struct determine which zones will
 be considered frames by Despiker.
<br>

 By default, it is enough to use a zone with info string set to "frame" (and to ensure
 no other zone uses the same info string).</p>

<dl><dt class="d_decl"><a name="DespikerFrameFilter.info"></a>string <a name="info"></a><span class="ddoc_psymbol">info</span>;
</dt>
<dd><p>Info string of a zone must be equal to this for that zone to be considered a frame.
</p>
<p>If <b>null</b>, zone <a name="info"></a><span class="ddoc_psymbol">info</span> does not determine which zones are frames. Must not be set to
 string value "NULL".</p>

</dd>
<dt class="d_decl"><a name="DespikerFrameFilter.nestLevel"></a>ushort <a name="nestLevel"></a><span class="ddoc_psymbol">nestLevel</span>;
</dt>
<dd><p>Nest level of a zone must be equal to this for that zone to be considered a frame.
</p>
<p>If 0, zone nest level does not determine which zones are frames.</p>

</dd>
</dl>
</dd>
</dl>

</div>

<div id="copyright">
Copyright &copy; Ferdinand Majerech 2014 |
Page generated by AutoDDoc and <a href="http://www.digitalmars.com/d/2.0/ddoc.html">Ddoc</a>.
</div>

</body>
</html>
